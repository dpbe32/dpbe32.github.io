I"ü<p>En esta ocasi√≥n os traigo la m√°quina Blue de HackTheBox. Es una m√°quina Windows. Para saber por donde se debe explotar, primero se debe realizar el escaneo. Para ello se va a star usando Nmap. Se explicar√° los diferentes tipos de escaneo tanto el lento c√≥mo el r√°pido.</p>

<p>Primero se debe crear un directorio con el nombre de la m√°quina, despu√©s los subdirectorios para tener todo organizado. Y seguidamente lanzar una traza ICMP para saber si la m√°quina est√° activa. Tambi√©n se podr√° mediante el Ttl ante que sistema operativo se est√° enfrentando.</p>

<p><img src="../Blue_Hackthebox/captura1.png" alt="captura1" /></p>

<p>Una vez se tiene lo necesario, se comienza con la fase de reconocimiento. Se lanza una traza ICMP. Se puede ver que la m√°quina est√° activa. En base al TTL se puede identificar que es una m√°quina Windows. Debido a que el TTL en m√°quinas Linux es 64 y en m√°quinas Windows es 128. En este caso disminuye una unidad debido a que se est√° conectado por VPN y al pasar por los nodos este disminuye una unidad. Por lo tanto siempre va a ser 127.</p>

<p><img src="../Blue_Hackthebox/captura2.png" alt="captura2" /></p>

<p>Con la herramienta whichSystem que est√° creada en el lenguaje se puede identificar a qu√© sistema operativo se est√° enfrentando. Simplemente se debe pasar la direcci√≥n IP como argumento y este nos di≈ïa si es Windows o linux.</p>

<p><img src="../Blue_Hackthebox/captura3.png" alt="captura3" /></p>

<p>Una vez identificado el sistema operativo de forma manual, se debe empezar con la enumeraci√≥n de puertos. Para empezar se va a realizar el t√≠pico escaneo para detectar los puertos abierto. Si se ve que el escaneo va demasiado lento, se realizar el TCP SYN Port scan.
Primero se debe indicar que se quiere escanear todo el rango de puertos (-p-). Le indicamos que se quiere filtrar s√≥lo por los puertos abiertos. Para a√±adirle velocidad mediante la plantilla de temporizado le indicamos el p√°rametro (-T5). Le metemos el p√°rametro (-v). Y para que no nos aplique resoluci√≥n DNS le metemos el par√°metro (-n).</p>

<p><img src="../Blue_Hackthebox/captur4.png" alt="captura4" /></p>

<p>C√≥mo este tipo de escaneo en m√°quinas Windows suele ser ciertamente lento se le va a aplicar un TCP SYN Port Scan. Para ello se le a√±ade el par√°metro (-sS) indic√°ndole el (‚Äìmin-rate 5000) para indicarle que no vaya m≈õ lento que 5000 paquetes por segundo. Le a√±adimos el triple verbose para ver m√°s informaci√≥n y se le a√±ade el par√°metro (-Pn) para que no aplique Host Discovery.</p>

<p><img src="../Blue_Hackthebox/captura5.png" alt="captura5" /></p>

<p>Lo extraemos en formato Grepeable, debido a que yo tengo una funci√≥n definida en la bashrc. Esta funci√≥n se llama extractPorts que lo que hace es copiarte los puertos en el teclado sin tener que poner los puertos manualmente. Lo √∫nico que hace falta es instalar ‚ÄòXclip‚Äô y ‚ÄòBatcat‚Äô.</p>

<p><img src="../Blue_Hackthebox/captura7.png" alt="captura7" /></p>

<p>Parseamos la informaci√≥n del archivo extra√≠do.</p>

<p><img src="../Blue_Hackthebox/captura8.png" alt="captura8" /></p>

<p>Ahora se tiene que escanear la versi√≥n y servicios que corren para estos puertos. Simplemente mediante el argumento (-sC) le indicamos que queremos lanzar una serie de scripts b√°sicos de enumeraci√≥n y con el (-sV) sirve para detectar la versi√≥n y servicios que corren para estos puertos. Para evitr poner demasiados los podemos fusionar (-sCV). Mediante el par√°metro (-p) indicamos los puertos que est√°n copiados y finalmante le pasamos la IP. Extraemos la informaci√≥n en un formato NMAP.</p>

<p><img src="../Blue_Hackthebox/captura9.png" alt="captura9" /></p>

<p>Para empezar a enumerar informaci√≥n podemos lanzar la herramienta ‚Äòcrackmapexec‚Äô ya que el servicio SMB est√° expuesto. Esta herramienta lo que nos reporta es un poco m√°s de informaci√≥n sobre la m√°quina v√≠ctima.</p>

<p><img src="../Blue_Hackthebox/captura10.png" alt="captura10" /></p>

:ET